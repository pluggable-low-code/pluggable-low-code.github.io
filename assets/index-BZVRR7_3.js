import{fA as er,fB as tr,fC as nr,fD as et,fE as oe,cN as Q,fF as tt,fG as Te,dm as L,fH as Vt,fI as Ht,fJ as rr,fK as ir,fL as nt,fM as Yt,fN as or,fO as sr,fP as ar,fQ as Xt,fR as lr,fS as rt,dk as it,fT as je,fU as ot,cI as U,fV as dr,fW as cr,fX as ur,fY as fr,fZ as Zt,f_ as gr,f$ as qt,g0 as xe,g1 as Ee,g2 as pr,g3 as Qt,g4 as en,df as D,g5 as Ne,g6 as tn,g7 as mr,g8 as hr,g9 as jt,ga as st,gb as yr,eS as te,gc as vr,dj as Pe,gd as Lt,ge as xr,gf as Mt,gg as Er,gh as $r,ev as Sr,fy as at,cU as $e,cW as E,gi as Cr,ep as K,cM as O,gj as Le,de as br,eC as lt,dI as dt,gk as Pr,gl as wr,gm as Tr,dR as nn,cK as k,gn as Se,cH as ee,T as X,d as P,go as rn,dJ as jr,dK as Lr,gp as Mr,dE as Ir,Y as se,ew as Or,eN as Rr,eP as Ar,gq as Me,eh as ct,en as on,d9 as W,d6 as C,da as w,dY as M,ee as Ie,gr as Nr,d8 as A,gs as It,e1 as Oe,gt as me,cG as Ye,gu as ut,gv as _r,ed as sn,gw as kr,ei as Ge,ej as ze,dL as Ur,gx as Dr,e5 as Br,gy as be,gz as Wr,eb as J,db as we,dc as Fr,d_ as Ot,gA as Gr,gB as zr,gC as Kr,e2 as Jr,fx as Vr,dd as Hr,gD as Yr,gE as Xr,gF as Zr,gG as qr,gH as Qr,gI as ei,gJ as ti,gK as ni,eV as ri,gL as ii,cL as Ke,c_ as Ce,cQ as oi,l as an,gM as si,bo as ai,gN as li,dD as di,dW as ci,gO as ui,dG as fi,gP as gi,gQ as pi,gR as mi,gS as hi,gT as yi,gU as vi,gV as xi,gW as Ei,gX as $i,gY as Si,gZ as Ci,g_ as bi,g$ as Pi,h0 as wi,h1 as Ti}from"./index-CEF5Rj8z.js";import{r as g,j as u,R as Re}from"./index-CjPfdrK1.js";import{M as ji}from"./index-ATcIQZoR.js";function Li(e){var t=er(e),n=t%1;return t===t?n?t-n:t:0}function Mi(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}var Ii=Object.prototype,Oi=Ii.hasOwnProperty,ne=tr(function(e,t){if(nr(t)||et(t)){oe(t,Q(t),e);return}for(var n in t)Oi.call(t,n)&&tt(e,n,t[n])}),Rt=Te?Te.isConcatSpreadable:void 0;function Ri(e){return L(e)||Vt(e)||!!(Rt&&e&&e[Rt])}function ln(e,t,n,r,i){var o=-1,s=e.length;for(n||(n=Ri),i||(i=[]);++o<s;){var a=e[o];n(a)?Ht(i,a):i[i.length]=a}return i}function Ai(e){var t=e==null?0:e.length;return t?ln(e):[]}function dn(e){return rr(ir(e,void 0,Ai),e+"")}var Ni="Expected a function";function _i(e,t){var n;if(typeof t!="function")throw new TypeError(Ni);return e=Li(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}function ki(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}function Ui(e,t){return e&&oe(t,Q(t),e)}function Di(e,t){return e&&oe(t,nt(t),e)}function Bi(e,t){return oe(e,Yt(e),t)}var Wi=Object.getOwnPropertySymbols,cn=Wi?function(e){for(var t=[];e;)Ht(t,Yt(e)),e=sr(e);return t}:or;function Fi(e,t){return oe(e,cn(e),t)}function un(e){return ar(e,nt,cn)}var Gi=Object.prototype,zi=Gi.hasOwnProperty;function Ki(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&zi.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Ji(e,t){var n=t?Xt(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var Vi=/\w*$/;function Hi(e){var t=new e.constructor(e.source,Vi.exec(e));return t.lastIndex=e.lastIndex,t}var At=Te?Te.prototype:void 0,Nt=At?At.valueOf:void 0;function Yi(e){return Nt?Object(Nt.call(e)):{}}var Xi="[object Boolean]",Zi="[object Date]",qi="[object Map]",Qi="[object Number]",eo="[object RegExp]",to="[object Set]",no="[object String]",ro="[object Symbol]",io="[object ArrayBuffer]",oo="[object DataView]",so="[object Float32Array]",ao="[object Float64Array]",lo="[object Int8Array]",co="[object Int16Array]",uo="[object Int32Array]",fo="[object Uint8Array]",go="[object Uint8ClampedArray]",po="[object Uint16Array]",mo="[object Uint32Array]";function ho(e,t,n){var r=e.constructor;switch(t){case io:return Xt(e);case Xi:case Zi:return new r(+e);case oo:return Ji(e,n);case so:case ao:case lo:case co:case uo:case fo:case go:case po:case mo:return lr(e,n);case qi:return new r;case Qi:case no:return new r(e);case eo:return Hi(e);case to:return new r;case ro:return Yi(e)}}var yo="[object Map]";function vo(e){return rt(e)&&it(e)==yo}var _t=je&&je.isMap,xo=_t?ot(_t):vo,Eo="[object Set]";function $o(e){return rt(e)&&it(e)==Eo}var kt=je&&je.isSet,So=kt?ot(kt):$o,Co=1,bo=2,Po=4,fn="[object Arguments]",wo="[object Array]",To="[object Boolean]",jo="[object Date]",Lo="[object Error]",gn="[object Function]",Mo="[object GeneratorFunction]",Io="[object Map]",Oo="[object Number]",pn="[object Object]",Ro="[object RegExp]",Ao="[object Set]",No="[object String]",_o="[object Symbol]",ko="[object WeakMap]",Uo="[object ArrayBuffer]",Do="[object DataView]",Bo="[object Float32Array]",Wo="[object Float64Array]",Fo="[object Int8Array]",Go="[object Int16Array]",zo="[object Int32Array]",Ko="[object Uint8Array]",Jo="[object Uint8ClampedArray]",Vo="[object Uint16Array]",Ho="[object Uint32Array]",v={};v[fn]=v[wo]=v[Uo]=v[Do]=v[To]=v[jo]=v[Bo]=v[Wo]=v[Fo]=v[Go]=v[zo]=v[Io]=v[Oo]=v[pn]=v[Ro]=v[Ao]=v[No]=v[_o]=v[Ko]=v[Jo]=v[Vo]=v[Ho]=!0;v[Lo]=v[gn]=v[ko]=!1;function fe(e,t,n,r,i,o){var s,a=t&Co,l=t&bo,d=t&Po;if(n&&(s=i?n(e,r,i,o):n(e)),s!==void 0)return s;if(!U(e))return e;var c=L(e);if(c){if(s=Ki(e),!a)return dr(e,s)}else{var f=it(e),p=f==gn||f==Mo;if(cr(e))return ur(e,a);if(f==pn||f==fn||p&&!i){if(s=l||p?{}:fr(e),!a)return l?Fi(e,Di(s,e)):Bi(e,Ui(s,e))}else{if(!v[f])return i?e:{};s=ho(e,f,a)}}o||(o=new Zt);var h=o.get(e);if(h)return h;o.set(e,s),So(e)?e.forEach(function(m){s.add(fe(m,t,n,m,e,o))}):xo(e)&&e.forEach(function(m,x){s.set(x,fe(m,t,n,x,e,o))});var $=d?l?un:gr:l?nt:Q,y=c?void 0:$(e);return Mi(y||e,function(m,x){y&&(x=m,m=e[x]),tt(s,x,fe(m,t,n,x,e,o))}),s}var Yo=1,Xo=4;function Zo(e){return fe(e,Yo|Xo)}var qo=1,Qo=2;function es(e,t,n,r){var i=n.length,o=i;if(e==null)return!o;for(e=Object(e);i--;){var s=n[i];if(s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){s=n[i];var a=s[0],l=e[a],d=s[1];if(s[2]){if(l===void 0&&!(a in e))return!1}else{var c=new Zt,f;if(!(f===void 0?qt(d,l,qo|Qo,r,c):f))return!1}}return!0}function mn(e){return e===e&&!U(e)}function ts(e){for(var t=Q(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,mn(i)]}return t}function hn(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}function ns(e){var t=ts(e);return t.length==1&&t[0][2]?hn(t[0][0],t[0][1]):function(n){return n===e||es(n,e,t)}}function rs(e,t){return e!=null&&t in Object(e)}function is(e,t,n){t=xe(t,e);for(var r=-1,i=t.length,o=!1;++r<i;){var s=Ee(t[r]);if(!(o=e!=null&&n(e,s)))break;e=e[s]}return o||++r!=i?o:(i=e==null?0:e.length,!!i&&pr(i)&&Qt(s,i)&&(L(e)||Vt(e)))}function yn(e,t){return e!=null&&is(e,t,rs)}var os=1,ss=2;function as(e,t){return en(e)&&mn(t)?hn(Ee(e),t):function(n){var r=D(n,e);return r===void 0&&r===t?yn(n,e):qt(t,r,os|ss)}}function ls(e){return function(t){return t?.[e]}}function ds(e){return function(t){return Ne(t,e)}}function cs(e){return en(e)?ls(Ee(e)):ds(e)}function _e(e){return typeof e=="function"?e:e==null?tn:typeof e=="object"?L(e)?as(e[0],e[1]):ns(e):cs(e)}function us(e,t,n,r){for(var i=-1,o=e==null?0:e.length;++i<o;){var s=e[i];t(r,s,n(s),e)}return r}function ft(e,t){return e&&mr(e,t,Q)}function fs(e,t){return function(n,r){if(n==null)return n;if(!et(n))return e(n,r);for(var i=n.length,o=-1,s=Object(n);++o<i&&r(s[o],o,s)!==!1;);return n}}var vn=fs(ft);function gs(e,t,n,r){return vn(e,function(i,o,s){t(r,i,n(i),s)}),r}function ps(e,t){return function(n,r){var i=L(n)?us:gs,o={};return i(n,e,_e(r),o)}}var ge=function(){return hr.Date.now()},ms="Expected a function",hs=Math.max,ys=Math.min;function Xe(e,t,n){var r,i,o,s,a,l,d=0,c=!1,f=!1,p=!0;if(typeof e!="function")throw new TypeError(ms);t=jt(t)||0,U(n)&&(c=!!n.leading,f="maxWait"in n,o=f?hs(jt(n.maxWait)||0,t):o,p="trailing"in n?!!n.trailing:p);function h(S){var I=r,z=i;return r=i=void 0,d=S,s=e.apply(z,I),s}function $(S){return d=S,a=setTimeout(x,t),c?h(S):s}function y(S){var I=S-l,z=S-d,N=t-I;return f?ys(N,o-z):N}function m(S){var I=S-l,z=S-d;return l===void 0||I>=t||I<0||f&&z>=o}function x(){var S=ge();if(m(S))return F(S);a=setTimeout(x,y(S))}function F(S){return a=void 0,p&&r?h(S):(r=i=void 0,s)}function H(){a!==void 0&&clearTimeout(a),d=0,r=l=i=a=void 0}function G(){return a===void 0?s:F(ge())}function le(){var S=ge(),I=m(S);if(r=arguments,i=this,l=S,I){if(a===void 0)return $(l);if(f)return clearTimeout(a),a=setTimeout(x,t),h(l)}return a===void 0&&(a=setTimeout(x,t)),s}return le.cancel=H,le.flush=G,le}function vs(e,t){var n=-1,r=et(e)?Array(e.length):[];return vn(e,function(i,o,s){r[++n]=t(i,o,s)}),r}var xs=Object.prototype,Es=xs.hasOwnProperty,$s=ps(function(e,t,n){Es.call(e,n)?e[n].push(t):st(e,n,[t])}),Ss="[object String]";function re(e){return typeof e=="string"||!L(e)&&rt(e)&&yr(e)==Ss}function Cs(e,t){return t.length<2?e:Ne(e,ki(t,0,-1))}function bs(e,t){var n={};return t=_e(t),ft(e,function(r,i,o){st(n,t(r,i,o),r)}),n}function ie(e,t){var n={};return t=_e(t),ft(e,function(r,i,o){st(n,i,t(r,i,o))}),n}function Ps(e,t){return t=xe(t,e),e=Cs(e,t),e==null||delete e[Ee(te(t))]}function ws(e){return vr(e)?void 0:e}var Ts=1,js=2,Ls=4,uc=dn(function(e,t){var n={};if(e==null)return n;var r=!1;t=Pe(t,function(o){return o=xe(o,e),r||(r=o.length>1),o}),oe(e,un(e),n),r&&(n=fe(n,Ts|js|Ls,ws));for(var i=t.length;i--;)Ps(n,t[i]);return n});function xn(e,t,n,r){if(!U(e))return e;t=xe(t,e);for(var i=-1,o=t.length,s=o-1,a=e;a!=null&&++i<o;){var l=Ee(t[i]),d=n;if(l==="__proto__"||l==="constructor"||l==="prototype")return e;if(i!=s){var c=a[l];d=void 0,d===void 0&&(d=U(c)?c:Qt(t[i+1])?[]:{})}tt(a,l,d),a=a[l]}return e}function Ms(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var s=t[r],a=Ne(e,s);n(a,s)&&xn(o,xe(s,e),a)}return o}function gt(e){return _i(2,e)}function Is(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function Os(e,t){if(e!==t){var n=e!==void 0,r=e===null,i=e===e,o=Lt(e),s=t!==void 0,a=t===null,l=t===t,d=Lt(t);if(!a&&!d&&!o&&e>t||o&&s&&l&&!a&&!d||r&&s&&l||!n&&l||!i)return 1;if(!r&&!o&&!d&&e<t||d&&n&&i&&!r&&!o||a&&n&&i||!s&&i||!l)return-1}return 0}function Rs(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,s=i.length,a=n.length;++r<s;){var l=Os(i[r],o[r]);if(l){if(r>=a)return l;var d=n[r];return l*(d=="desc"?-1:1)}}return e.index-t.index}function As(e,t,n){t.length?t=Pe(t,function(o){return L(o)?function(s){return Ne(s,o.length===1?o[0]:o)}:o}):t=[tn];var r=-1;t=Pe(t,ot(_e));var i=vs(e,function(o,s,a){var l=Pe(t,function(d){return d(o)});return{criteria:l,index:++r,value:o}});return Is(i,function(o,s){return Rs(o,s,n)})}function Ns(e,t){return Ms(e,t,function(n,r){return yn(e,r)})}var En=dn(function(e,t){return e==null?{}:Ns(e,t)});function $n(e,t,n){return e==null?e:xn(e,t,n)}var ke=xr(function(e,t){if(e==null)return[];var n=t.length;return n>1&&Mt(e,t[0],t[1])?t=[]:n>2&&Mt(t[0],t[1],t[2])&&(t=[t[0]]),As(e,ln(t),[])});const _s=Sr(e=>`init${e.slice(0,1).toUpperCase()}${e.slice(1)}`);let Sn=class extends $r{t;get plugins(){return this.t}extKeys;initOptions;constructor(t,n){super(),this.t=t,this.extKeys=n}init(t){this.initOptions=t;for(const n of this.plugins)for(const r of this.extKeys){const i=_s(r);try{const o=n[i]?.(this);o&&this.disposers.push(o)}catch(o){throw console.error("init failed",n,i,o),o}}return this}initSubcontext(t,n){return new ks(this.plugins,t).init(n)}};const ks=Sn;let Us=class extends Sn{i=Er();get plugins(){return[...this.i.values()]}constructor(t,n){super([],n),this.use(...t)}use(...t){for(const n of t){const{id:r,position:i,replace:o}=n;let s;i&&(s={type:i.type,targetKey:i.target.id}),this.i.set(r,n,s),o&&this.unuse(...o)}return this}unuse(...t){for(const n of t)this.i.delete(n.id);return this}};const Cn=Us;function Ds(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(i){i(n)}),(r=e.get("*"))&&r.slice().map(function(i){i(t,n)})}}}const R=Cr,Z="object",q="array",_="slot",ce="box",Ze="",Bs="",Ws="component-library",Fs="utils",Gs="pro",zs="low",Ks=Gs,Ut="dependencies",ue=[wr],j="element",T="expression",he="enter",Ae="exit",ye=[K,O],Dt="_";function bn(e,t,n,r,i){const o=te(e.components)?.elementType,s=te(o?.split(Dt)),a=Tr(s||-1,-1n)+1n,l={elementType:[r,a].join(Dt),pkgName:t,pkgVersion:n,componentType:r};return i&&!nn(i,[r])&&(l.importPath=i),l}function Pn(e,t){let{components:n}=e;n||(n=e.components=[]),n.push(t)}function pc(e,t,n,r,i){const{components:o=[]}=e,s=new Map(o.map(a=>[k([a.pkgName,a.componentType]),a.elementType]));return r.map((a,l)=>{const d=k([t,a]),c=s.get(d);if(c)return c;const f=bn(e,t,n,a,i?.[l]);return Pn(e,f),f.elementType})}function wn(){return`r${Pr()}`}function Ue(e){return at(e)}function V(e){return Ue(e)?e.type:R}function De(e){return Ue(e)?e:{type:R,value:e}}function pe(e){return Ue(e)&&e.type===R&&!at(e.value)?e.value:e}function Be(e){return!E(e)&&V(e)===R}function Js(e){return!!e&&V(e)===Z}function Vs(e){return!!e&&V(e)===q}function Hs(e){return!!e&&V(e)===_}function mc(e){return!!e&&V(e)===ce}function ae(e){if(Be(e))return De(e).value}function Ys(e){return{type:R,value:e}}function pt(e){return pe({type:R,value:e})}function Xs(e){if(Vs(e))return e;const t=ae(e);if(L(t))return{type:q,value:t.map(pt)}}function Zs(e){if(Js(e))return e;const t=ae(e);if(at(t))return{type:Z,value:ie(t,pt)}}function qs(e,t){const n={...t};return e&&E(n[O])&&(n[O]={type:_,value:e}),n}function Qs(e){let t,n;if(e){const{children:r,...i}=e;Hs(r)&&(t=r.value,n=i)}return n||(n={...e}),[t,n]}const ea={uidlGenerators:{*view(e){yield{type:j,element:e.view,jsonPath:["view"],logicPath:["view"]}}},elementGenerators:{*props({props:e}){if(e)for(const t in e)yield{type:T,expression:e[t],jsonPath:[K,t],logicPath:[K,t]}},*children({children:e}){if(e)for(let t=0;t<e.length;t++)yield{type:j,element:e[t],jsonPath:[O,t],logicPath:[K,O,t]}},*if({if:e}){E(e)||(yield{type:T,expression:e,jsonPath:["if"],logicPath:["if"]})},*for({for:e}){E(e)||(yield{type:T,expression:e,jsonPath:["for"],logicPath:["for"]})}},expressionGenerators:{*[Z](e){const t=e;for(const n in t.value)yield{type:T,expression:t.value[n],jsonPath:["value",n],logicPath:[n]}},*[q](e){const t=e;for(let n=0;n<t.value.length;n++)yield{type:T,expression:t.value[n],jsonPath:["value",n],logicPath:[n]}},*[_](e){const t=e;for(let n=0;n<t.value.length;n++)yield{type:j,element:t.value[n],jsonPath:["value",n],logicPath:[n]}}},uidlLogicGetters:{view({view:e},t,{getInElement:n}){const[r,...i]=t,o=n(e,i);return o&&{...o,jsonPath:[r,...o.jsonPath]}}},elementLogicGetters:{props({props:e,children:t},n,{getInExpression:r,getInElement:i}){let o;if(e){const[s,a,...l]=n,d=e[a];if(!E(d)){const c=r(d,l);c&&(o={...c,jsonPath:[s,a,...c.jsonPath]})}}if(!o&&t&&Le(n,ye)){if(n.length===2)return{type:T,expression:{type:_,value:t},jsonPath:[O]};const[s,...a]=n.slice(2),l=t[s];if(E(l))return;const d=i(l,a);return d&&{...d,jsonPath:[O,s,...d.jsonPath]}}return o},if({if:e},t,{getInExpression:n}){if(E(e))return;const[r,...i]=t,o=n(e,i);return o&&{...o,jsonPath:[r,...o.jsonPath]}},for({for:e},t,{getInExpression:n}){if(E(e))return;const[r,...i]=t,o=n(e,i);return o&&{...o,jsonPath:[r,...o.jsonPath]}}},expressionLogicGetters:{[R](e,t){const n=e,r=Ue(n),i=D(r?n.value:n,t);if(!E(i))return{type:T,expression:i,jsonPath:r?["value",...t]:t,isPart:!0}},[Z](e,t,{getInExpression:n}){const r=e,[i,...o]=t,s=r.value[i];if(E(s))return;const a=n(s,o);return a&&{...a,jsonPath:["value",i,...a.jsonPath]}},[q](e,t,{getInExpression:n}){const r=e,[i,...o]=t,s=r.value[i];if(E(s))return;const a=n(s,o);return a&&{...a,jsonPath:["value",i,...a.jsonPath]}},[_](e,t,{getInElement:n}){const r=e,[i,...o]=t,s=r.value[i];if(E(s))return;const a=n(s,o);return a&&{...a,jsonPath:["value",i,...a.jsonPath]}}},uidlLogicSetters:{view(e,t,n,{setInElement:r}){return e.view=r(e.view,t.slice(1),n),e}},elementLogicSetters:{props(e,t,n,{setInExpression:r}){let{props:i,children:o}=e;!o&&Le(t,ye)&&t.length===3&&(o=e.children=[]),i=qs(o,i);const s=t[1],a=r(i[s],t.slice(2),n);return E(a)?delete i[s]:i[s]=a,[o,i]=Qs(i),o?e.children=o:delete e.children,br(i)?e.props=i:delete e.props,e},if(e,t,n,{setInExpression:r}){const i=r(e.if??null,t.slice(1),n);return E(i)?delete e.if:e.if=i,e},for(e,t,n,{setInExpression:r}){const i=r(e.for??null,t.slice(1),n);return E(i)?delete e.for:e.for=i,e}},expressionLogicSetters:{[R](e,t,n,{setInExpression:r}){const i=De(e),[o,...s]=t;U(i.value)||(i.value=lt(o)?[]:{});const a=r(pt(i.value[o]??null),s,n);if(E(a))return L(i.value)?i.value.splice(o,1):delete i.value[o],pe(i);if(Be(a))return i.value[o]=ae(a),pe(i);let l;return L(i.value)?l=Xs(i):l=Zs(i),l.value[o]=a,l},[Z](e,t,n,{setInExpression:r}){const i=e,{value:o}=i,[s,...a]=t,l=r(o[s]??null,a,n);return E(l)?delete o[s]:o[s]=l,Bt(i)},[q](e,t,n,{setInExpression:r}){const i=e,[o,...s]=t,a=r(i.value[o]??null,s,n);return E(a)?i.value.splice(o,1):i.value[o]=a,Wt(i)},[_](e,t,n,{setInElement:r}){const i=e,[o,...s]=t,a=r(i.value[o],s,n);return a?i.value[o]=a:i.value.splice(o,1),i}},uidlMinifiers:{dependencies(e){return e.dependencies?.length||delete e.dependencies,e},components(e){return e.components?.length||delete e.components,e},view(e,{minifyElement:t}){return e.view=t(e.view),e}},elementMinifiers:{props(e,{minifyExpression:t}){const{props:n}=e;return n&&(Q(n).length?e.props=ie(n,t):delete e.props),e},children(e,{minifyElement:t}){const{children:n}=e;return n?.length?e.children=n.map(t):delete e.children,e}},expressionMinifiers:{[R]:pe,[Z](e,{minifyExpression:t}){const n=e;return n.value=ie(n.value,t),Bt(n)},[q](e,{minifyExpression:t}){const n=e;return n.value=n.value.map(t),Wt(n)},[_](e,{minifyElement:t}){const n=e;return n.value=n.value.map(t),n}}};function Bt(e){const{value:t}=e;return dt(t).every(Be)?Ys(ie(t,ae)):e}function Wt(e){const{value:t}=e;return t.every(Be)?t.map(ae):e}const ta=$e({},ea,{expressionGenerators:{*[ce](e){yield{type:T,expression:e.expr,jsonPath:["expr"],logicPath:[]}}},expressionLogicGetters:{[ce](e,t,{getInExpression:n}){const r=n(e.expr??null,t);return r&&{...r,jsonPath:["expr",...r.jsonPath]}}},expressionLogicSetters:{[ce](e,t,n,{setInExpression:r}){const i=e,o=r(i.expr??null,t,n);return E(o)?o:(i.expr=o,i)}},uidlMinifiers:{editorName(e){return delete e.editorName,e}},elementMinifiers:{name(e){return delete e.name,e}},expressionMinifiers:{[ce](e,{minifyExpression:t}){const n=e.expr;return n&&t(n)}}});function Tn(e){const t={getInElement(n,r){if(!r.length)return{type:j,element:n,jsonPath:[]};const i=r[0],o=e.elementLogicGetters[i];return o?.(n,r,t)},getInExpression(n,r){if(!r.length)return{type:T,expression:n,jsonPath:[]};const i=e.expressionLogicGetters[V(n)];return i?.(n,r,t)}};return t}function na(e,t,n){const{getInElement:r}=Tn(e);return r(t,n)}function ra(e){if(e?.type===T)return e.expression}function hc(e,t,n){const{getInElement:r}=Tn(e);return ra(r(t,n))}function ia(e,t,n){const r=na(e,t,[...n,0]);if(r?.type===j){const i=D(t,r.jsonPath.slice(0,-1));if(L(i))return i}}function oa(e){const t={setInElement(n,r,i){if(!r.length){if(!i)return i;if(i.type!==j)throw new Error(`Can not setByElement with a invalid entity. type=${i.type}`);return i.element}const o=r[0],s=e.elementLogicSetters[o];if(!s)throw new Error(`Can not setByElement with a invalid setter. key=${o}`);return s(n,r,i,t)},setInExpression(n,r,i){if(!r.length){if(!i)return i;if(i.type!==T)throw new Error(`Can not setByExpression with a invalid entity. type=${i.type}`);return pe(i.expression)}const o=e.expressionLogicSetters[V(n)];return o?o(n,r,i,t):e.expressionLogicSetters[R](null,r,i,t)}};return t}function jn(e,t,n,r){const{setInElement:i}=oa(e);return i(t,n,r)}function sa(e,t,n,r){return jn(e,t,n,r&&{type:j,element:r})}function aa(e,t,n,r){return jn(e,t,n,E(r)?r:{type:T,expression:r})}function*la(e,t,n){for(const r of Se(e.uidlGenerators))for(const i of r(t))yield*mt(e,i,[],[],[],n)}function*mt(e,t,n,r,i,o){const s=[...n,...t.jsonPath],a=[...r,...t.logicPath],l=t.type===j?[...i,t.element.id]:i;yield*da(e,t,s,a,l,o)}function*da(e,t,n,r,i,o){yield*(t.type===j?ht:ca)(e,t,n,r,i,o)}function*ht(e,t,n,r,i,o){if(i.length>o.elementIdPathMaxLength)return;const s=o.entityDetailTypes.indexOf(j)!==-1;s&&o.traverseTimes.indexOf(he)!==-1&&(yield a(he));for(const l of Se(e.elementGenerators))for(const d of l(t.element))yield*mt(e,d,n,r,i,o);s&&o.traverseTimes.indexOf(Ae)!==-1&&(yield a(Ae));function a(l){return{...t,traverseTime:l,fullJsonPath:n,fullLogicPath:r,elementIdPath:i,elementId:te(i)??null,parentElementId:i[i.length-2]??null}}}function*ca(e,t,n,r,i,o){const s=o.entityDetailTypes.indexOf(T)!==-1;s&&o.traverseTimes.indexOf(he)!==-1&&(yield d(he));const a=De(t.expression),l=e.expressionGenerators[a.type];if(l)for(const c of l(t.expression))yield*mt(e,c,n,r,i,o);s&&o.traverseTimes.indexOf(Ae)!==-1&&(yield d(Ae));function d(c){return{...t,traverseTime:c,fullJsonPath:n,fullLogicPath:r,elementIdPath:i,elementId:te(i)??null,parentElementId:i[i.length-2]??null}}}const ua={entityDetailTypes:[j,T],traverseTimes:[he],elementIdPathMaxLength:1/0};function yt(...e){return ne({},ua,...e)}function*yc(e,t,n){yield*ht(e,{type:j,element:t,jsonPath:[],logicPath:[]},[],[],[t.id],yt({entityDetailTypes:[T],elementIdPathMaxLength:1},n))}function*Ln(e,t,n){yield*la(e,t,yt({entityDetailTypes:[j]},n))}function*Ft(e,t,n){yield*ht(e,{type:j,element:t,jsonPath:[],logicPath:[]},[],[],[t.id],yt({entityDetailTypes:[j]},n))}const Mn="i18n";function fa(e){return!!e&&V(e)===Mn}function vc(e,t){e.i18n=$e(e.i18n,t)}const ga="static-path",In="dynamic-path";function On(e,t){return`${e}$_$${t}`}function pa(e,t){return ie(t,n=>bs(n,(...[,r])=>On(e,r)))}function xc(e){if(fa(e))return En(e,"key");const t=ae(e);if(re(t))return t}function Ec(e){return U(e)?{...e,type:Mn}:e}function ma(e,t,n=!0){switch(e.type){case void 0:case ga:{if(Le(t,e.logicPath,void 0,n))return!0;break}case In:{if(Le(t,e.dynamicLogicPath,(...[,r])=>r==="*",n))return!0;break}}return!1}function $c(e,t){for(let n=t.length-1;n>=0;n--)if(e.dynamicLogicPath[n]==="*")return`${t[n]}`;return null}function Gt(e){return e.type!==In&&nn(e.logicPath,ye)}function Sc(e){return e.join(".")}function ha(e){return{logicPath:e}}const ya="editor",va=[ya],xa={id:"name",initEditor(e){e.name=e.initOptions.name||"lc-editor"}},Ea={id:"uidl-store",initEditor(e){const t=e.uidlStore={};t.uidl=null,W(t,{uidl:w.ref})}},$a={id:"uidl-utils-config",initEditor(e){e.uidlUtilsConfig=Zo(ta)}},Sa={id:"uidl-utils-config-init",initEditor(e){$e(e.uidlUtilsConfig,e.initOptions.uidlUtilsConfig)}},Ca=[$a,Sa],ba={id:"emitter",initEditor(e){e.emitter=Ds(),W(e.emitter,{emit:C})}},ve="uidl",Pa="uidlCompositionStart",Rn="uidlCompositionUpdate",wa="uidlCompositionEnd",vt="init",Ta="update",ja={id:"uidl-store-edit",initEditor(e){const{uidlStore:t,emitter:n}=e;t.maxUndoRedoSize=e.initOptions.maxUndoRedoSize;const r=C(()=>{t.isUndoable=!1,t.isRedoable=!1,t.size=0});r(),n.on(ve,({type:i,uidl:o})=>{if(i===vt){r();const s=t.undoRedoList=new Nr({initState:o,maxSize:t.maxUndoRedoSize,onChange:C((a,l,d)=>{t.uidl=l,t.isUndoable=s.isUndoable,t.isRedoable=s.isRedoable,t.size=s.size,n.emit(ve,{type:Ta,uidl:l,patchs:d})})})}}),t.getUidlOrThrow=()=>{const{draft:i,uidl:o}=t,s=i||o;if(!s)throw new Error("Can not get uidl before init.");return s},t.draft=null,A(t,"isEditing",()=>!!t.draft),t.edit=C((i,o)=>{const{undoRedoList:s}=t;t.draft||n.emit(Pa,{uidl:s.currentState});const a=s.produce(c=>(t.draft=c,i(c)),o),l=t.draft=s.draft,{currentState:d}=s;return l?n.emit(Rn,{draft:l,uidl:d}):n.emit(wa,{uidl:d}),a}),t.undo=()=>{t.undoRedoList.undo()},t.redo=()=>{t.undoRedoList.redo()},W(t,{isUndoable:w,isRedoable:w,size:w})}},La={id:"uidl-store-components",initEditor(e){const{uidlStore:t,uidlUtilsConfig:n}=e;t.createUidlComponent=(o,s)=>{const{pdStore:a}=e,l=a.getPd(o),d=a.getCd(o,s),c=bn(t.getUidlOrThrow(),o,l.pkgVersion,s,d.code.importPath||ue);return t.edit(f=>{Pn(f,c)}),c},t.clearUidlComponents=()=>{t.edit(o=>{const{components:s}=o;if(!s)return;const a=new Set(s.map(d=>d.elementType)),l=new Set;for(const d of Ln(n,o))l.add(d.element.type);a.size!==l.size&&(o.components=s.filter(d=>l.has(d.elementType)))})};const r=It(o=>o.elementType);t.getUidlComponent=o=>{const{components:s}=t.getUidlOrThrow();return s&&r(s).get(o)||{elementType:o,pkgName:Ze,pkgVersion:Bs,componentType:o}};const i=It(o=>k([o.pkgName,o.componentType]));t.getElementType=(o,s)=>{if(o===Ze)return s;const{components:a}=t.getUidlOrThrow();return(a&&i(a).get(k([o,s])))?.elementType??null},t.getElementTypeOrThrow=(o,s)=>{const a=t.getElementType(o,s);if(Oe(a))throw new Error(`The elementType not exists for pkgName=${o} and componentType=${s}.`);return a},t.ensureElementType=(o,s)=>{const a=t.getElementType(o,s);return Oe(a)?t.createUidlComponent(o,s).elementType:a}}},Ma={id:"uidl-store-init",initEditor(e){const{uidlStore:t,emitter:n,initOptions:{uidlKey:r,uidl:i,loadUidl:o}}=e;t.init=C(s=>{t.uidl=s,n.emit(ve,{type:vt,uidl:s,patchs:[]})}),t.uidlKey=r,i?t.init(i):o&&me(o(),t.init)}},Ia=[Ea,ja,Ma,La],An={id:"layout-store",initEditor(e){const{name:t,uidlStore:{uidlKey:n}}=e,r=e.layoutStore={};r.config={},r.state=w({}),M(r,"stateLoader",()=>new Ye(`${t}:layout-state`,null));const i=Xe(()=>{r.stateLoader?.save(r.state)});r.setState=C((s,a=!!r.stateLoader)=>{ne(r.state,s),a&&i()}),r.uidlState=w({}),M(r,"uidlStateLoader",()=>new Ye(`${t}:layout-uidl-state:${n}`,null));const o=Xe(()=>{r.uidlStateLoader?.save(r.uidlState)});r.setUidlState=C((s,a=!!r.uidlStateLoader)=>{ne(r.uidlState,s),a&&o()})}},Oa={id:"render",initEditor(e){e.render=()=>u.jsx(u.Fragment,{children:e.layoutStore.render()})}},xt=g.createContext(null),Ra=xt.Provider;xt.Consumer;function b(){return g.useContext(xt)}const Aa={id:"editor-react-context",initEditor(e){const{render:t}=e;e.render=()=>u.jsx(Ra,{value:e,children:t()})}},Na=ee(()=>{const{contextMenuStore:{visible:e,displayPoint:t,matchedItems:n,close:r},i18nStore:{tText:i}}=b(),o=g.useRef(null),s=X(()=>o.current||document.body),a=g.useMemo(()=>({left:t.x,top:t.y}),[t]),l=g.useMemo(()=>n.map(({id:p,label:h})=>({key:p,label:i(h)})),[n,i]),d=X(p=>{p.preventDefault(),r()}),c=X(()=>r()),f=X(({key:p})=>{r(n.find(({id:h})=>h===p))});return e?u.jsxs(_a,{className:"lc-context-menu",onContextMenu:d,ref:o,children:[u.jsx("div",{className:"lc-mask",onClick:c}),u.jsx(ka,{open:!0,arrow:!1,placement:"rightTop",mouseEnterDelay:0,getPopupContainer:s,content:u.jsx(ji,{items:l,onSelect:f}),children:u.jsx("div",{className:"lc-anchor",style:a})})]}):null}),_a=P.div`
  position: fixed;
  inset: 0;
  z-index: ${rn};

  .lc-mask {
    position: absolute;
    inset: 0;
  }

  .lc-anchor {
    position: absolute;
  }
`,ka=P(Ar)`
  .ant-popover-inner {
    padding: 0;
  }
`,Ua={id:"context-menu-store",initEditor(e){const{render:t}=e,n=e.contextMenuStore={};n.items={},n.visible=!1,n.displayPoint=ut,n.matchedItems=[];const r=gt(()=>ke(n.items,({index:i=1/0})=>i));n.open=C((i,o)=>{const s=r().filter(a=>a.match(i,e));return s.length?(n.visible=!0,n.displayPoint=o,n.matchedItems=s,n.currentEntity=i,!0):!1}),n.close=C(i=>{n.visible=!1,i&&i.action(n.currentEntity,e)}),W(n,{visible:w}),e.render=()=>u.jsxs(u.Fragment,{children:[t(),u.jsx(Na,{})]})}},Da="element";function Cc(e){return e.type===Da}const Ba={id:"context-menu-store-element"};function bc(e){const{contextMenuStore:{open:t}}=b(),n=Me(e);return g.useMemo(()=>({onContextMenu(r){const i=ct(r),o=on(n.current,r,i);o&&t(o,i)&&r.preventDefault()}}),[t,n])}const Wa=[Ua,Ba],Fa=g.memo(({children:e})=>{const t=b(),n=X(i=>{t.elRoot=i}),{styleStore:{cssVars:r}}=t;return u.jsx(Ga,{className:"lc-root",$cssVars:r,ref:n,children:e})}),Ga=P.div`
  ${e=>e.$cssVars}
  width: 100%;
  height: 100%;
`,za={id:"root-host",initEditor(e){const{render:t}=e;e.render=()=>u.jsx(Fa,{children:t()})}},Ka="dragStart",qe="dragMove",Ja="dragMoveWithPos",Qe="dragEnd",Va={id:"dnd-store",initEditor(e){const{emitter:t}=e,n=e.dndStore={};a(),n.preparingDistance=10,n.draggingPoint=ut;const r=n.droppableOptionsMap=new Map,i=n.droppablePositionActionMap=new Map;n.autoScrollDistance=50,n.autoScrollSpeed=500,n.dragStart=C((y,m)=>{a(),n.draggingEntity=y,n.draggingPoint=m,c(),t.emit(Ka,{entity:y,point:m})}),n.dragMove=C((y,m)=>{t.emit(qe,{point:y,target:m});const x=n.draggingEntity;if(!x)return;if(n.isDragging)n.draggingPoint=y;else if(_r(y,n.draggingPoint)>n.preparingDistance**2)n.isDragging=!0,n.draggingPoint=y;else return;let F=null;sn(m,H=>{const G=r.get(H)?.().calcHoveringPosition(x,y,H);return G||Oe(G)?(F=G,!0):!1}),n.hoveringPosition=F,t.emit(Ja,{point:y,pos:F})}),n.dragEnd=C(()=>{const{draggingEntity:y,hoveringPosition:m,isDragging:x}=n;x&&(s=ge()),y&&m&&i.get(m.type)?.(y,m),a(),f(),t.emit(Qe)}),W(n,{draggingEntity:w.ref,isPreparing:w,isDragging:w,draggingPoint:w.ref,hoveringPosition:w.ref});const o=kr(()=>{document.body.style.userSelect=n.draggingEntity?"none":""});let s=0;return n.shouldPreventClick=()=>{const y=ge(),m=s+n.shouldPreventClickDuration;return y<m},n.shouldPreventClickDuration=100,h(),()=>{f(),$(),o()};function a(){n.draggingEntity=null,n.isPreparing=!1,n.isDragging=!1,n.hoveringPosition=null}function l(y){if(!e.elRoot)return;const m=ct(y);n.dragMove(m,y.target)}function d(){e.elRoot&&n.dragEnd()}function c(){Ge("mousemove",l),Ge("mouseup",d)}function f(){ze("mousemove",l),ze("mouseup",d)}function p(y){e.elRoot&&n.shouldPreventClick()&&y.stopImmediatePropagation()}function h(){Ge("click",p,!0)}function $(){ze("click",p,!0)}}},Ha=ee(()=>{const{dndStore:{isDragging:e}}=b();return e?u.jsxs(Ya,{className:"lc-dnd-mask",children:[u.jsx(Xa,{}),u.jsx(qa,{})]}):null}),Ya=P.div`
  position: fixed;
  inset: 0px;
  z-index: ${rn};
  pointer-events: none;
  user-select: none;
`,Xa=ee(()=>{const{dndStore:{droppablePositionRendererMap:e,hoveringPosition:t}}=b(),n=t&&e.get(t.type),r=t?.bounding;return u.jsx(Za,{style:r&&{top:r.s.y,left:r.s.x,width:jr(r),height:Lr(r)},children:n&&u.jsx(n,{...t})})}),Za=P.div`
  position: absolute;
  z-index: 1;
`,qa=ee(()=>{const{dndStore:{draggableEntityRendererMap:e,draggingEntity:t,draggingPoint:n}}=b(),r=t&&e.get(t.type);return r?u.jsx(Qa,{className:"lc-dnd-entity",style:{transform:Mr(n)},children:u.jsx(r,{...t})}):null}),Qa=P.div`
  position: absolute;
  top: 0;
  left: 0;
  padding: 4px;
  border: 1px solid;
  border-radius: ${Ir};
  background: #bec8c8;
  opacity: 0.6;
  z-index: 2;
`,el={id:"dnd-store-mask",initEditor(e){const{dndStore:t,render:n}=e;t.draggableEntityRendererMap=new Map,t.droppablePositionRendererMap=new Map,e.render=()=>u.jsxs(u.Fragment,{children:[n(),u.jsx(Ha,{})]})}},Nn="element",tl={id:"dnd-store-element-renderer",initEditor(e){const{dndStore:t}=e;t.draggableEntityRendererMap.set(Nn,nl)}},nl=g.memo(({element:e})=>{const{pdStore:{getComponentIconByEt:t}}=b(),n=t(e.type);return u.jsx(_n,{icon:n,name:e.name})}),_n=se(({icon:e,name:t})=>u.jsxs(rl,{className:"lc-draggable-icon-name",children:[e&&u.jsx(Or,{icon:e}),t&&u.jsx(Rr,{className:"lc-name",children:t})]})),rl=P.div`
  display: flex;
  align-items: center;
`,il=g.memo(({pkgName:e,componentType:t})=>{const{pdStore:{getComponentIcon:n,getComponentName:r}}=b(),i=n(e,t),o=r(e,t);return u.jsx(_n,{icon:i,name:o})}),kn="component",ol={id:"dnd-store-component-renderer",initEditor(e){const{dndStore:t}=e;t.draggableEntityRendererMap.set(kn,il)}};function sl(e,t){const n=Me(e),r=Me(t),{emitter:i}=b();g.useEffect(()=>{return i.on(qe,o),i.on(Qe,s),()=>{i.off(qe,o),i.off(Qe,s)};function o(a){n.current(a)}function s(){r.current?.()}},[i,n,r])}function al(e){const{dndStore:{autoScrollDistance:t,autoScrollSpeed:n}}=b(),r=X((o,s)=>{const a=Ur(o);if(!Dr(s,Br(a,t)))return ut;let l=0,d=0;return be(s.x-a.s.x)<t?l=-n:be(a.e.x-s.x)<t&&(l=n),be(s.y-a.s.y)<t?d=-n:be(a.e.y-s.y)<t&&(d=n),Wr(l,d)}),i=g.useRef();sl(o=>{const{point:s}=o,a=e(o);let l=i.current;if(!a){l?.dispose(),i.current=void 0;return}const d=r(a,s);l?.obj!==a?(l?.dispose(),l=i.current=Yr(a,d)):l.vector=d},()=>{const o=i.current;o&&(o.dispose(),delete i.current)})}function Pc(e,t){const n=g.useRef(null);return al(({target:r})=>{if(t?.())return null;let i=n.current;if(i&&e){const o=sn(r,Xr);Zr(i,o)&&(i=o)}return i}),n}function wc(e){const{dndStore:{dragStart:t}}=b(),n=Me(e);return g.useMemo(()=>({onMouseDown(r){if(r.buttons!==1)return;const i=ct(r),o=on(n.current,r,i);o&&t(o,i)}}),[t,n])}function Tc(e){const t=X(e),{dndStore:{droppableOptionsMap:n}}=b(),r=g.useMemo(()=>{let i;return o=>{i&&n.delete(i),o&&n.set(o,()=>({calcHoveringPosition:t})),i=o}},[n,t]);return g.useMemo(()=>({ref:r}),[r])}function jc(e){return[Nn,kn].includes(e.type)}const ll=[Va,el,tl,ol],dl={id:"element-store",initEditor(e){e.elementStore={}}},cl={id:"i18n-store",initEditor(e){const{name:t}=e,n=e.i18nStore={},r=gt(d=>{d.length&&n.setLanguage(qr(d),!1)}),i=n.setLanguageNames=C(d=>{const c=n.languages=Q(d);n.languageNames=d,r?.(c)});n.language=void 0,n.setLanguage=C((d,c=!0)=>{n.language=d,c&&l({language:d})});let o={};o=Qr,i(o);const s=J(null),a=J(null);n.addResource=(d,c)=>{$e(c?a:s,d)},n.t=(d,c)=>{const f=c?.pkgName;re(f)&&(d=On(f,d));const p=[e.i18nStore.language,d];return D(a,p)??D(s,p,d)},n.tText=(d,c)=>re(d)?d:e.i18nStore.t(d.key,c),M(n,"i18nStateLoader",()=>new Ye(`${t}:i18n-state`,null));const l=Xe(d=>{n.i18nStateLoader?.save(d)})}},ul={id:"i18n-store-init",initEditor(e){const{i18nStore:t,initOptions:{language:n,i18n:r,languageNames:i,i18nStateLoader:o}}=e;n&&t.setLanguage(n,!1),i&&t.setLanguageNames(i),r&&t.addResource(r,!0),Ie(o)||M(t,"i18nStateLoader",()=>o||null)}},fl={id:"i18n-store-load-state",initEditor(e){const{i18nStore:t}=e;me(t.i18nStateLoader?.load(),n=>n&&t.setLanguage(n.language,!1))}},gl=[cl,ul,fl],pl={id:"pd-store",initEditor(e){const{i18nStore:t,uidlStore:n}=e,r=e.pdStore={};r.pds=J(null),r.cds=J(null);const{pds:i,cds:o}=W(r,{pds:w.shallow,cds:w.shallow});r.addPd=C(a=>{const l=a.pkgName;i[l]=a;for(const d of a.components){const c=o[l]||(o[l]=J(null));c[d.type]=d}a.i18n&&t.addResource(pa(a.pkgName,a.i18n))}),r.deletePd=C(a=>{delete i[a],delete o[a]}),r.getPd=a=>{const l=i[a];if(!l)throw new Error(`The pd ${k(a)} is not exists.`);return l},r.getPkgVersion=a=>r.getPd(a).pkgVersion,r.getCdByEt=s(r.getCd=(a,l)=>{const d=o[a];if(!d)throw new Error(`The pd ${k(a)} is not exists.`);const c=d[l];if(!c)throw new Error(`The component ${k(l)} of pd ${k(a)} is not exists.`);return c}),r.getComponentNameByEt=s(r.getComponentName=(a,l)=>{const d=r.getCd(a,l);return t.tText(d.name,{pkgName:a})}),r.getComponentIconByEt=s(r.getComponentIcon=(a,l)=>r.getCd(a,l).icon??null),r.getSlotsByEt=s(r.getSlots=(a,l)=>r.getCd(a,l).slots||[]),r.getSlotByEt=s(r.getSlot=(a,l,d)=>r.getSlots(a,l).find(c=>ma(c,d,!1))||null),r.isContainerComponentByEt=s(r.isContainerComponent=(a,l)=>!!r.getSlots(a,l).find(Gt)),r.getChildrenSlotWithUnknown=a=>{if(re(a)){const d=e.elementStore.findElementDetail(a);if(!d)return d;a=d.element}let l=e.pdStore.getSlotsByEt(a.type).find(Gt);return!l&&a.children?.length&&(l=ha(ye)),l||null};function s(a){return(l,...d)=>{const{pkgName:c,componentType:f}=n.getUidlComponent(l);return a(c,f,...d)}}}},ml={id:"pd-store-init",initEditor(e){const{initOptions:{pds:t},pdStore:n}=e;for(const r of t||[])n.addPd(r)}},hl=[pl,ml],yl={id:"element-store-fd",initEditor(e){const{emitter:t,uidlUtilsConfig:n,uidlStore:r,elementStore:i}=e,o=i.elementDetailCacheMap=new Map,s=i.elementNameSet=new Set;i.uidlToBeCached=r.uidl,i.cachedUidl=null;const a=new Map;i.refreshFindCache=()=>{const l=i.uidlToBeCached;if(i.cachedUidl!==l){if(i.cachedUidl=l,o.clear(),s.clear(),l)for(const d of Ln(n,l))o.set(d.element.id,d),s.add(d.element.name);a.clear()}},t.on(ve,C(({uidl:l})=>{i.uidlToBeCached=l})),t.on(Rn,C(({draft:l})=>{i.uidlToBeCached=l})),i.findElementDetail=l=>(i.refreshFindCache(),o.get(l)||null),i.hasElementName=l=>(i.refreshFindCache(),s.has(l)),i.generateElementName=l=>{let d=l,c=a.get(l)||2;for(;i.hasElementName(d);)d=`${l} ${c++}`;return a.set(l,c),s.add(d),d},i.isChildElement=(l,d,c=!0)=>{const f=i.findElementDetail(d);return f?c?f.elementIdPath.includes(l):f.parentElementId===l:!1},i.getParentElementId=l=>l&&i.findElementDetail(l)?.parentElementId||null,W(i,{uidlToBeCached:w.ref})}},vl={id:"layout-store-init",initEditor(e){const{layoutStore:t}=e,{stateLoader:n,uidlStateLoader:r}=$e(t.config,e.initOptions.layout);Ie(n)||M(t,"stateLoader",()=>n||null),Ie(r)||M(t,"uidlStateLoader",()=>r||null)}},xl={id:"layout-store-load-state",initEditor(e){const{layoutStore:t}=e;me(t.stateLoader?.load(),n=>n&&t.setState(n,!1)),me(t.uidlStateLoader?.load(),n=>n&&t.setUidlState(n,!1))}},El=[An,vl,xl],$l={id:"element-store-select",initEditor(e){const{layoutStore:t,elementStore:n,pdStore:r,uidlStore:i}=e;A(n,"selectedElementId",()=>t.uidlState.selectedElementId||null),A(n,"selectedElement",()=>{const{selectedElementId:o}=n;return Oe(o)?null:n.findElementDetail(o)?.element||null}),A(n,"selectedPd",()=>{const{selectedElement:o}=n;if(!o)return null;const{pkgName:s}=i.getUidlComponent(o.type);return r.getPd(s)}),A(n,"selectedCd",()=>{const{selectedElement:o}=n;return o?r.getCdByEt(o.type):null}),n.selectElement=o=>{t.setUidlState({selectedElementId:o})},W(n,{selectedElementId:we,selectedElement:we,selectedCd:we})}},Sl={id:"element-store-edit",initEditor(e){const{elementStore:t,uidlStore:n,uidlUtilsConfig:r,pdStore:i,i18nStore:o}=e;t.createElement=(s,a)=>{const l=n.ensureElementType(s,a),d=i.getComponentName(s,a),c=wn(),f=t.generateElementName(d),p=i.getCd(s,a);return{id:c,name:f,type:l,...Fr(p.initializer?.partialElement,o.language)}},t.appendElement=(s,a,l,d)=>{const c=t.findElementDetail(s);c&&n.edit(f=>{const p=D(f,c.fullJsonPath),h=ia(r,p,a)?.length||0;if(h)sa(r,p,[...a,h],d);else{const $={type:_,value:[d]};l&&($.dynamic=l),aa(r,p,a,$)}})},t.insertElement=(s,a,l=Ot)=>{const d=t.findElementDetail(s);!d||t.isRootElement(s)||n.edit(c=>{const f=D(c,d.fullJsonPath.slice(0,-1));let p=te(d.fullJsonPath);!L(f)||!lt(p)||(l===Ot&&p++,f.splice(p,0,a))})},t.canAddElementByElement=s=>{const{rootElement:a}=t;if(s=s||a,!s)return!1;const l=i.isContainerComponentByEt(s.type);return!(s===a&&!l)},t.addElementByElement=(s,a)=>{const{rootElement:l}=t;if(a=a||l,!a)return;const d=i.isContainerComponentByEt(a.type);n.edit(()=>{const c=a.id;d?t.appendElement(c,ye,!1,s):t.insertElement(c,s)})},t.deleteElement=(s,a=!0)=>{if(t.isRootElement(s))return null;const l=t.findElementDetail(s);return l?(n.edit(d=>{Gr(d,l.fullJsonPath),a&&n.clearUidlComponents()}),l.element):null},t.editElement=(s,a)=>{const l=t.findElementDetail(s.id);l&&n.edit(d=>{$n(d,l.fullJsonPath,s)},a)}}},Cl={id:"element-store-copy-paste",initEditor(e){const{name:t,uidlStore:n,elementStore:r,uidlUtilsConfig:i,pdStore:o}=e,s=`p-lc:${t}:element`;r.copy=async a=>{const l=r.findElementDetail(a);if(!l)return;const{uidl:d}=n,{element:c}=l,f=new Set;for(const h of Ft(i,c))f.add(h.element.type);const p=d?.components?.filter(({elementType:h})=>f.has(h));return zr(s,{element:c,components:p})},r.paste=async a=>{const l=await Kr(s);if(!l)return;const{components:d=[],element:c}=l;let f;a&&(f=r.findElementDetail(a)?.element),r.canAddElementByElement(f)&&Jr(()=>{n.edit(()=>{const p=new Map;for(const h of d){const{elementType:$,pkgName:y,componentType:m}=h,x=n.ensureElementType(y,m);p.set($,x)}for(const{element:h}of Ft(i,c)){h.id=wn();const $=p.get(h.type);h.type=$;const y=o.getComponentNameByEt($);h.name=r.generateElementName(y)}r.addElementByElement(c,f)}),r.selectElement(c.id)})}}},bl={id:"element-store-is",initEditor(e){const{uidlStore:t,elementStore:n}=e;A(n,"rootElementId",()=>n.rootElement?.id||null),A(n,"rootElement",()=>t.uidl?.view||null),n.getElementId=r,n.isRootElement=i=>(i=r(i),i===n.rootElementId),n.isElementType=(i,o,s,a)=>{i=r(i);const l=n.findElementDetail(i);if(!l)return!1;const d=t.getUidlComponent(l.element.type);return Vr(d,Hr({pkgName:o,componentType:s,pkgVersion:a}))};function r(i){return U(i)?i.id:i}}},Pl=[dl,Cl,Sl,yl,bl,$l],wl="save",Tl={id:"save-store",initEditor(e){const{emitter:t,uidlStore:n}=e,r=e.saveStore={};r.savedUidl=n.uidl,A(r,"isSavable",()=>r.checkSavable()),r.checkSavable=()=>n.uidl!==r.savedUidl,r.isSaving=!1,r.save=C(()=>{const{uidl:i}=n;!i||!r.isSavable||(r.savedUidl=i,r.isSaving=!0,me(r.onSave?.(i,e),C(()=>{r.isSaving=!1})),t.emit(wl,{uidl:i}))}),W(r,{savedUidl:w.ref,isSavable:we,isSaving:w}),t.on(ve,({type:i,uidl:o})=>{i===vt&&(r.savedUidl=o)})}},jl={id:"save-store-init",initEditor(e){const{saveStore:t}=e;t.onSave=e.initOptions.onSave||t.onSave}},Ll=[Tl,jl],Ml={id:"style-store",initEditor(e){const t=e.styleStore={};t.cssVars={},t.setCssVars=n=>{ne(t.cssVars,n)}}},Il={id:"style-store-init",initEditor(e){const{styleStore:t}=e;ne(t.cssVars,e.initOptions.cssVars)}},Ol=[Ml,Il],Rl=[xa,ba,Oa,...Ol,...gl,...Ca,...Ia,...El,...hl,...Pl,...ll,...Wa,...Ll,za,Aa];function Lc(){return new Cn(Rl,va)}const Et="runtime",$t="controller",We="element",St="context",Al=[St,Et],Un=[St,$t],Dn=[St,We],Nl={id:"dependencies",initRuntime(e){const{initOptions:{dependencies:t}}=e;e.dependencies={...t}}},_l={id:"parent",initContext(e){const t=e.parent=e.initOptions.parent||e;e.root=t===e?e:t.root}},kl={id:"context-type",initContext(e){switch(e.extKeys){case Dn:{e.type=We;break}case Un:{e.type=$t;break}default:{e.type=Et;break}}}},Ul={id:"uidl",initContext(e){const{initOptions:t}=e;e.type===Et?e.uidl=t.uidl:e.uidlElement=t.uidlElement}},Dl={id:"components",initRuntime(e){const{dependencies:t}=e;e.getComponent=i=>{const o=r(i);let s;if(o){const{pkgName:a,componentType:l,importPath:d=[l]}=o;s=[a,...d]}else s=[Ze,i];return D(t,s)};const n=ni(i=>{const o=new Map((i||[]).map(s=>[s.elementType,s]));return s=>o.get(s)});function r(i){const{uidl:{components:o}}=e;if(o)return n(o)(i)}},initElement(e){const{root:{getComponent:t},uidlElement:{type:n}}=e;e.component=t(n)}},Bl={id:"expression-evaluator",initRuntime(e){e.expressionEvaluators=J(null),e.addExpressionEvaluator=t=>{e.expressionEvaluators[t.type]=t}}};function Wl(e,{relativeJsonPath:t=[],relativeLogicPath:n=[],silent:r}={}){const i={relativeJsonPath:t,relativeLogicPath:n},o=De(e);try{const s=this.root.expressionEvaluators[o.type];if(!s)throw new Error(`invalid expression type: ${o.type}`);return s.eval(o,this,i)}catch(s){if(r)console.error("eval expression failed silent: ",{err:s,expr:e,ctx:this});else throw s}}const Fl={id:"eval-expression",initContext(e){e.evalExpression=Wl}};function Gl(e){const{uidlElement:{for:t}}=e,n=t&&e.evalExpression(t,{relativeJsonPath:["for"],relativeLogicPath:["for"],silent:!0});if(n){if(L(n))return{items:n};if(n.items)return n}}const zl=Gl,Kl={id:"for",initController(e){M(e,"for",()=>zl(e))}};function Jl(e){const{uidlElement:{if:t}}=e,n=t&&e.evalExpression(t,{relativeJsonPath:["if"],relativeLogicPath:["if"],silent:!0});return E(n)?!0:!!n}const Vl=Jl,Hl={id:"if",initController(e){M(e,"if",()=>Vl(e))}};function Yl(e){const{if:t,for:n}=e;return t?n:{items:[]}}const Xl={id:"controller-children-lo",initController(e){A(e,"childrenLoopOrigin",()=>Yl(e))}},Zl={id:"key",initController(e){e.key=e.initOptions.key||e.uidlElement.id},initElement(e){e.key=e.initOptions.key||e.uidlElement.id}},ql={id:"init-options-transform",initRuntime(e){e.initOptionsTransform={controller:[],element:[]},e.transformInitOptions=(t,...n)=>{const r=e.initOptionsTransform[t];return ei(r,...n)}}},Ql={id:"init-context",initContext(e){e.initController=t=>e.initSubcontext(Un,e.root.transformInitOptions($t,t,e)),e.initElement=t=>e.initSubcontext(Dn,e.root.transformInitOptions(We,t,e))}},ed={id:"loop",initContext(e){M(e,"loop",()=>{const{initOptions:{loop:t},parent:n}=e;let r;if(e!==n&&(r=n.loop),!t)return r;const i={...t};return r&&(i.parent=r),i})}};function td(e,t){const{root:{initElement:n},uidlElement:r}=e;if(!t)return[n({parent:e,uidlElement:r})];const{items:i,key:o}=t;return i.map((s,a)=>n({key:Bn(s,o)??`${a}`,parent:e,uidlElement:r,loop:{item:s,index:a,items:i}}))}function Bn(e,t){let n;if(re(e)&&(n=e),(lt(e)||ri(e))&&(n=`${e}`),re(t)&&U(e)){const r=e[t];return Bn(r)}return n}const nd=td,rd={id:"controller-children",initController(e){const t=M(e,O,()=>nd(e,e.childrenLoopOrigin));return()=>t.current?.map(n=>n.dispose())}};function id(e){return(e.uidlElement.children||[]).map(t=>e.root.initController({parent:e,uidlElement:t}))}const od=id,sd={id:"element-children",initElement(e){const t=M(e,O,()=>od(e));return()=>t.current?.map(n=>n.dispose())}},ad={type:q,eval(e,t,{relativeJsonPath:n,relativeLogicPath:r}){return e.value.map((i,o)=>t.evalExpression(i,{relativeJsonPath:[...n,"value",o],relativeLogicPath:[...r,o]}))}},ld={id:"expression-array",initRuntime(e){e.addExpressionEvaluator(ad)}},dd={type:Z,eval(e,t,{relativeJsonPath:n,relativeLogicPath:r}){return ie(e.value,(i,o)=>t.evalExpression(i,{relativeJsonPath:[...n,"value",o],relativeLogicPath:[...r,o]}))}},cd={id:"expression-object",initRuntime(e){e.addExpressionEvaluator(dd)}},ud={type:R,eval(e){return e.value}},fd={id:"expression-staic",initRuntime(e){e.addExpressionEvaluator(ud)}},gd={id:"load-code",initRuntime(e){e.loadCode=(r,i)=>{const o=r.type||Ks,s=e.codeLoaders[o];return s(r,i)};const t=e.codeLoaders=J(null);t.pro=(r,i)=>{const{from:o=Ut}=r,s=e.proCodeLoaders[o];return s(r,i)};const n=e.proCodeLoaders=J(null);n[Ut]=(r,i)=>e.dependencies[i.pkgName]}},pd={id:"load-dependencies",initRuntime(e){e.loadDependencies=t,A(e,"isLoadingDependencies",()=>!!e.loadingDependenciesCount),e.loadingDependenciesCount=0,e.updateLoadingDependenciesCount=r=>{e.loadingDependenciesCount=r(e.loadingDependenciesCount)};function t(){const{uidl:{dependencies:r},loadCode:i}=e;for(const o of r||[]){const{pkgName:s}=o;switch(o.type){case Ws:{const{codes:a}=o;for(const l of dt(a)){const{importPath:d=ue}=l;n(e.dependencies,i(l,o),l.type===zs?[]:l.exportPath,[s,...d])}break}case Fs:{const{code:a}=o,{importPath:l=ue}=a;n(e.dependencies,i(a,o),a.exportPath,[s,...l]);break}}}}function n(r,i,o=ue,s=ue){if(ti(i)){e.updateLoadingDependenciesCount(a=>++a),(async()=>{try{n(r,await i,o,s)}finally{e.updateLoadingDependenciesCount(a=>--a)}})();return}$n(r,s,D(i,o))}}},md={id:"load-dependencies-init",initRuntime(e){e.loadDependencies()}};function hd(e){const t={},{uidlElement:{props:n={}}}=e;for(const r in n)t[r]=e.evalExpression(n[r],{relativeJsonPath:[K,r],relativeLogicPath:[K,r],silent:!0});return t}const yd=hd,vd={id:K,initElement(e){M(e,K,()=>yd(e))}};function xd(e){return e.initController({parent:e,uidlElement:e.uidl.view})}const Ed=xd,$d={id:"view",initRuntime(e){const t=M(e,"view",()=>Ed(e));return()=>t.current?.dispose()}},Sd=[kl,_l,Fl,ql,Ql,Ul,Zl,ed,Nl,gd,pd,md,Bl,fd,cd,ld,Dl,vd,Hl,Kl,Xl,sd,rd,$d];function Cd(){return new Cn(Sd,Al)}const bd=g.createContext(null),Je={didCatch:!1,error:null};class Mc extends g.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=Je}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){const{error:t}=this.state;if(t!==null){for(var n,r,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];(n=(r=this.props).onReset)===null||n===void 0||n.call(r,{args:o,reason:"imperative-api"}),this.setState(Je)}}componentDidCatch(t,n){var r,i;(r=(i=this.props).onError)===null||r===void 0||r.call(i,t,n)}componentDidUpdate(t,n){const{didCatch:r}=this.state,{resetKeys:i}=this.props;if(r&&n.error!==null&&Pd(t.resetKeys,i)){var o,s;(o=(s=this.props).onReset)===null||o===void 0||o.call(s,{next:i,prev:t.resetKeys,reason:"keys"}),this.setState(Je)}}render(){const{children:t,fallbackRender:n,FallbackComponent:r,fallback:i}=this.props,{didCatch:o,error:s}=this.state;let a=t;if(o){const l={error:s,resetErrorBoundary:this.resetErrorBoundary};if(typeof n=="function")a=n(l);else if(r)a=g.createElement(r,l);else if(i===null||g.isValidElement(i))a=i;else throw s}return g.createElement(bd.Provider,{value:{didCatch:o,error:s,resetErrorBoundary:this.resetErrorBoundary}},a)}}function Pd(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.length!==t.length||e.some((n,r)=>!Object.is(n,t[r]))}function Wn(){return document.body}const wd=g.createContext(Wn),Td=wd.Provider,Fn=g.createContext(Wn),jd=Fn.Provider;function Ic(){return g.useContext(Fn)}const Ld={type:_,eval(e,t,{relativeLogicPath:n}){if(t.type!==We)throw new Error(`Slot expressions can not eval in ${t.type} ctx.`);const{slotCache:r}=t,i=k(n);let o=r.get(i);if(!o){const s=new Map,a=({item:l,index:d=0,key:c=`${d}`}={item:null,index:0})=>{let f=s.get(c);if(!f){const p=e.value.map(h=>t.root.initController({parent:t,uidlElement:h,loop:e.dynamic?{item:l,index:d}:void 0,key:`${h.id}|${c}`}));f={jsx:p.map(h=>h.render()),controllers:p}}return f.jsx};o={exprRet:e.dynamic?a:a(),secondaryCache:s},r.set(i,o)}return o.exprRet}},Md={id:"expression-slot-react",initRuntime(e){e.addExpressionEvaluator(Ld)},initElement(e){return e.slotCache=new Map,()=>{for(const{secondaryCache:t}of e.slotCache.values())for(const{controllers:n}of t.values())for(const r of n)r.dispose()}}},Id={id:"react-renderer-hocs",initRuntime(e){e.rendererHocs={runtime:{},controller:{},element:{}}}},zt={id:"react-cl-contexts",index:850,hoc(e){return g.memo(g.forwardRef((t,n)=>{const{__ctx__:r}=t,{getPopupContainer:i,getInnerPopupContainer:o}=r;let s=u.jsx(e,{...t,ref:n});return o&&(s=u.jsx(jd,{value:o,children:s})),i&&(s=u.jsx(Td,{value:i,children:s})),s}))}},Od={id:"react-cl-contexts",initRuntime(e){ne(e,En(e.initOptions,"getPopupContainer","getInnerPopupContainer")),e.rendererHocs.runtime[zt.id]=zt}},Rd=g.forwardRef(({__ctx__:{view:e},...t},n)=>{const{ControllerRenderer:r=Pt}=bt();return u.jsx(r,{...t,ref:n,__ctx__:e},e.key)}),Ct=g.createContext({}),Ad=Ct.Provider,Kt=Ct.Consumer;function bt(){return g.useContext(Ct)}const Gn=g.forwardRef(({__ctx__:{component:e,props:t,children:n},...r},i)=>{const{ControllerRenderer:o=Pt}=bt();let s;if(O in r)s=r.children;else{let d=O in t?t.children:n.map(c=>u.jsx(o,{__ctx__:c},c.key));L(d)&&d.length<=1&&(d=d[0]),s=d}const a={...t,...r};E(s)||(a.children=s);const l=e;return u.jsx(l,{...a,ref:ii(l)?i:null})}),Pt=g.forwardRef(({__ctx__:{children:e},...t},n)=>{const{ElementRenderer:r=Gn}=bt(),i=e.length===1?{...t,ref:n}:{};return e.map(o=>u.jsx(r,{...i,__ctx__:o},o.key))}),Nd={id:"react-renderer",initRuntime(e){const t=gt(()=>{const n=e.rendererHocs;return{RuntimeRenderer:Ke(r(n.runtime),Rd),ControllerRenderer:Ke(r(n.controller),Pt),ElementRenderer:Ke(r(n.element),Gn)};function r(i){return ke(i,({index:o=1/0})=>-o).map(o=>o.hoc)}});e.render=(n,r)=>{const i=n?.key,o=t(),{RuntimeRenderer:s}=o;return u.jsx(Ad,{value:o,children:u.jsx(s,{...n,ref:r,__ctx__:e})},i)}},initController(e){e.render=(t,n)=>{const r=t?.key||e.key;return u.jsx(Kt,{children:({ControllerRenderer:i})=>i&&u.jsx(i,{...t,ref:n,__ctx__:e})},r)}},initElement(e){e.render=(t,n)=>{const r=t?.key||e.key;return u.jsx(Kt,{children:({ElementRenderer:i})=>i&&u.jsx(i,{...t,ref:n,__ctx__:e})},r)}}},_d=[Id,Nd,Md,Od];function Oc(){return Cd().use(..._d)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var B=function(){return B=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},B.apply(this,arguments)},kd=function(e){var t=e.dir,n=e.onStart,r=e.onEnd,i=e.onUpdate,o=e.className,s=e.style,a=e.children,l=g.useState(!1),d=l[0],c=l[1],f=g.useRef(null),p=g.useCallback(function(m){i(m)},[i]),h=g.useCallback(function(){var m=f.current;m&&(window.removeEventListener("mousemove",m.handleMouseMove),window.removeEventListener("touchmove",m.handleMouseMove),window.removeEventListener("mouseup",m.handleMouseUp),window.removeEventListener("touchend",m.handleMouseUp))},[]),$=g.useCallback(function(m){c(!1),h(),r(m)},[h,r]),y=g.useCallback(function(m){c(!0),h(),f.current={handleMouseMove:p,handleMouseUp:$},window.addEventListener("mousemove",p),window.addEventListener("touchmove",p),window.addEventListener("mouseup",$),window.addEventListener("touchend",$),n(m)},[h,p,$,n]);return g.useEffect(function(){return function(){h()}},[]),Re.createElement("div",{onMouseDown:y,onTouchStart:y,className:o,style:B({cursor:t+"-resize"},s)},d&&Re.createElement("style",null,`
        * {
          cursor: `+t+`-resize !important;
          -webkit-user-select: none !important;
        }
        `),a)},Ve=function(e){return e==null},He=function(e){return e.touches&&e.touches[0]&&(e.clientX=Math.round(e.touches[0].clientX),e.clientY=Math.round(e.touches[0].clientY)),e},Ud=function(e){var t=e.border,n,r,i;return/^(left|right)$/.test(t)?(n="width",r="clientX",i=t==="right"?1:-1):(n="height",r="clientY",i=t==="bottom"?1:-1),{wh:n,xy:r,sn:i}},Dd=function(e){var t=e.style,n=e.containerMeta,r=e.diffCoord,i=e.oldSize,o=n.wh,s=n.sn,a={};return i!=null&&(a[o]=i+r*s),a=B(B({},t),a),{style:a}},Bd=function(e){var t=e.border,n=e.handlerWidth,r=e.handlerOffset,i=e.handlerStyle,o,s={};return/^(left|right)$/.test(t)?(o="ew",s.width=n,s.top=0,s.bottom=0):(o="ns",s.height=n,s.left=0,s.right=0),s[t]=r,s=B(B({},s),i),{dir:o,style:s}},Wd=function(e){var t=e.border,n=e.onStart,r=e.onEnd,i=e.onUpdate,o=e.id,s=e.className,a=e.style,l=e.handlerClassName,d=e.handlerStyle,c=e.handlerWidth,f=e.handlerOffset,p=e.handlerZIndex,h=e.children,$=Ve(c)?16:c,y=Ve(f)?-$/2:f,m=Ve(p)?10:p,x=g.useState(0),F=x[0],H=x[1],G=g.useState(null),le=G[0],S=G[1],I=g.useRef(null),z=g.useRef(null),N=Ud({border:t}),Jn=Dd({style:a,containerMeta:N,diffCoord:F,oldSize:le}).style,wt=Bd({border:t,handlerWidth:$,handlerOffset:y,handlerStyle:d}),Vn=wt.dir,Hn=wt.style,Yn=g.useCallback(function(de){var Y=He(de),Fe=N.wh,qn=N.xy,Tt=z.current;if(Tt){var Qn=window.getComputedStyle(Tt)[Fe];H(0),S(parseInt(Qn,10)),I.current=Y[qn],n&&n(Y)}},[N,n]),Xn=g.useCallback(function(de){var Y=He(de);r&&r(Y)},[r]),Zn=g.useCallback(function(de){var Y=He(de),Fe=N.xy;I.current!==null&&(H(Y[Fe]-I.current),i&&i(Y))},[N,i]);return Re.createElement("div",{ref:z,id:o,className:s,style:B({position:"relative"},Jn)},Re.createElement(kd,{dir:Vn,className:l,style:B({position:"absolute",zIndex:m},Hn),onStart:Yn,onEnd:Xn,onUpdate:Zn}),h)};const Fd=se(()=>{const{layoutStore:{config:{body:{disable:e=!1,Content:t}={}}={}}}=b();return e?null:u.jsx(Gd,{className:"lc-cl-body",children:t&&u.jsx(t,{})})}),Gd=P.div`
  height: 100%;
  width: 0;
  flex: auto;
`,Jt=[ci,ui,fi],zn=se(({items:e})=>{const t=g.useMemo(()=>{const n=$s(dt(e),"type");for(const r of Jt)n[r]=ke(n[r]||[],({index:i=1/0})=>i);return n},[e]);return u.jsx(zd,{className:"lc-cl-hf-content",children:Jt.map(n=>u.jsx("div",{className:`lc-${n}`,children:t[n].map(r=>u.jsx(r.Component,{},r.id))},n))})}),zd=P.div`
  width: 100%;
  height: 100%;
  display: flex;

  .lc-left,
  .lc-center,
  .lc-right {
    display: flex;
    align-items: center;
  }

  .lc-left,
  .lc-right {
    flex: 1 0 auto;
  }

  .lc-center {
    flex: none;
  }

  .lc-right {
    flex-direction: row-reverse;
  }
`,Kd=se(()=>{const{layoutStore:{config:{footer:{disable:e=!1,height:t=24,Content:n=zn,contentItems:r={}}={}}={}}}=b(),i=g.useMemo(()=>Se(r),[r]);return e?null:u.jsx(Jd,{$height:t,className:"lc-cl-footer",children:u.jsx(n,{items:i})})}),Jd=P.div`
  ${e=>({height:e.$height})}
  width: 100%;
  display: flex;
  align-items: center;
  border-top: 1px solid ${Ce};
  flex: none;
`,Vd=se(()=>{const{layoutStore:{config:{header:{disable:e=!1,height:t=48,Content:n=zn,contentItems:r}={}}={}}}=b(),i=g.useMemo(()=>Se(r),[r]);return e?null:u.jsx(Hd,{$height:t,className:"lc-cl-header",children:u.jsx(n,{items:i})})}),Hd=P.div`
  ${e=>({height:e.$height})}
  width: 100%;
  display: flex;
  align-items: center;
  border-bottom: 1px solid ${Ce};
  flex: none;
`,Kn=g.memo(({resizable:e=!0,width:t,minWidth:n,maxWidth:r,onWidthChangeEnd:i,children:o,...s})=>{const a=g.useMemo(()=>oi("lc-resize-"),[]),[l,d]=g.useState(!1),c=g.useCallback(()=>{d(!0)},[]),f=g.useCallback(()=>{d(!1);const p=document.getElementById(a)?.getBoundingClientRect();p&&i?.(p.width)},[a,i]);return u.jsx(Yd,{id:a,handlerClassName:"lc-handler",$resizable:e,$isResizing:l,$width:t,$minWidth:n,$maxWidth:r,onStart:c,onEnd:f,...s,children:o})}),Yd=P(Wd)`
  ${e=>({width:e.$width,minWidth:e.$minWidth,maxWidth:e.$maxWidth})}
  ${e=>e.$isResizing||Ie(e.$width)?null:an`
            width: ${si(e.$width)} !important;
          `}

  .lc-handler {
    ${e=>({display:e.$resizable?void 0:"none"})}
  }
`,Xd=ee(()=>{const{layoutStore:{config:{left:{disable:e=!1,Content:t=qd,minWidth:n=200,maxWidth:r="45%",resizable:i=!0}={}}={},state:{leftWidth:o},setLeftWidth:s}}=b();return e?null:u.jsx(Zd,{border:"right",width:o,minWidth:n,maxWidth:r,resizable:i,onWidthChangeEnd:s,className:"lc-cl-left",children:u.jsx(t,{})})}),Zd=P(Kn)`
  height: 100%;
  border-right: 1px solid ${Ce};
  flex: none;
`,qd=ee(()=>{const{layoutStore:{config:{left:{contentItems:e,contentItemWidth:t=48,contentItemHeight:n=48}={}}={},state:{leftActiveItemId:r},setLeftActiveItemId:i},i18nStore:{tText:o}}=b(),s=g.useMemo(()=>ke(Se(e),({index:l=1/0})=>l),[e]),a=g.useMemo(()=>s.find(l=>l.id===r)||s[0],[s,r]);return u.jsxs(Qd,{className:"lc-cl-left-content",children:[u.jsx("div",{className:"lc-icons",children:s.map(l=>{const d=l===a;return u.jsx(ai,{title:o(l.iconTip),placement:"right",children:u.jsx(ec,{$width:t,$height:n,$isActive:d,onClick:i.bind(null,l.id),className:"lc-icon",children:u.jsx(l.Icon,{isActive:d})})},l.id)})}),s.map(l=>u.jsx(tc,{$isActive:l===a,className:"lc-inner",children:u.jsx(l.Component,{isActive:l===a})},l.id))]})}),Qd=P.div`
  width: 100%;
  height: 100%;
  display: flex;

  > .lc-icons {
    height: 100%;
    display: flex;
    flex-direction: column;
    border-right: 1px solid ${Ce};
  }
`,ec=P.div`
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  user-select: none;
  ${e=>({width:e.$width,height:e.$height})}

  &:hover {
    color: ${li};
  }

  && {
    ${e=>({color:e.$isActive?di:void 0})}
  }
`,tc=P.div`
  ${e=>e.$isActive?null:an`
            display: none;
          `}
  flex: auto;
  width: 0;
  height: 100%;
`,nc=ee(()=>{const{layoutStore:{config:{right:{disable:e=!1,minWidth:t=200,maxWidth:n="50%",resizable:r=!0,Content:i}={}}={},state:{rightWidth:o},setRightWidth:s}}=b();return e?null:u.jsx(rc,{border:"left",width:o,minWidth:t,maxWidth:n,resizable:r,onWidthChangeEnd:s,className:"lc-cl-right",children:i&&u.jsx(i,{})})}),rc=P(Kn)`
  height: 100%;
  border-left: 1px solid ${Ce};
  flex: none;
`,ic=se(()=>{const{layoutStore:{config:{header:{Component:e=Vd}={},footer:{Component:t=Kd}={},left:{Component:n=Xd}={},right:{Component:r=nc}={},body:{Component:i=Fd}={}}={}}}=b();return u.jsxs(oc,{className:"lc-cl",children:[u.jsx(e,{}),u.jsxs("div",{className:"lc-main",children:[u.jsx(n,{}),u.jsx(i,{}),u.jsx(r,{})]}),u.jsx(t,{})]})}),oc=P.div`
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;

  * {
    box-sizing: border-box;
  }

  > .lc-main {
    display: flex;
    height: 0;
    flex: auto;
  }
`,sc={[gi]:"#fff",[pi]:"rgba(0,0,0,.88)",[mi]:"rgba(0,0,0,.25)",[hi]:"#4096ff",[yi]:"#1677ff",[vi]:"#fff",[xi]:"rgba(5,5,5,.06)",[Ei]:"rgba(0,0,0,.65)",[$i]:"rgba(0,0,0,.25)",[Si]:"rgba(0,0,0,.04)",[Ci]:".3s",[bi]:"6px",[Pi]:9999,[wi]:1e3,[Ti]:999},ac={id:"classical-layout",position:{target:An},initEditor(e){const{styleStore:t}=e;t.setCssVars(sc);const n=e.layoutStore;n.render=()=>{const r=n.config.Component||ic;return u.jsx(r,{})},n.setState({leftWidth:n.config.left?.width||384,rightWidth:n.config.right?.width||384},!1),n.setLeftWidth=r=>{n.setState({leftWidth:r})},n.setRightWidth=r=>{n.setState({rightWidth:r})},n.setLeftActiveItemId=r=>{n.setState({leftActiveItemId:r})}}},Rc=[ac];export{Ld as $,Ze as A,Ds as B,wc as C,Tc as D,Mc as E,Pc as F,jc as G,Rc as H,j as I,ye as J,Da as K,ve as L,Cd as M,$d as N,rd as O,b as P,nd as Q,Kl as R,Ed as S,Nn as T,Hl as U,vd as V,zl as W,wn as X,ma as Y,Vl as Z,ic as _,ne as a,V as a0,ce as a1,Mn as a2,Aa as a3,za as a4,kn as a5,mc as a6,De as a7,hc as a8,aa as a9,qe as aA,Qe as aB,pe as aa,Xs as ab,Zs as ac,Js as ad,ae,Z as af,q as ag,Ic as ah,Hs as ai,Ys as aj,ta as ak,T as al,pc as am,vc as an,Pn as ao,bn as ap,bc as aq,Gt as ar,yc as as,ha as at,$c as au,Sc as av,ga as aw,Ec as ax,xc as ay,An as az,We as b,ie as c,uc as d,vl as e,$a as f,Lc as g,Zo as h,re as i,Ft as j,zs as k,$n as l,_ as m,Ln as n,gt as o,En as p,fa as q,Cc as r,ke as s,Oc as t,In as u,Li as v,ki as w,Ta as x,_e as y,vs as z};
//# sourceMappingURL=index-BZVRR7_3.js.map
